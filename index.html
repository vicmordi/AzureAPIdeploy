<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Journal Database App</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#0f1220; --panel:#161a2b; --panel2:#1d2340; --text:#e6e9f5; --muted:#a9b0c7;
      --primary:#7c9cff; --primary2:#5579ff; --accent:#00c2a8; --danger:#ff6b6b; --border:#2a3153;
      --shadow:0 14px 40px rgba(0,0,0,.35); --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      background: radial-gradient(1200px 600px at 10% -10%, #1b2140 0%, transparent 50%) no-repeat, var(--bg);
      font: 16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      display:grid; place-items:center; padding:24px;
    }
    .wrap{width:min(680px, 95vw);}
    .brand{display:flex;align-items:center;gap:10px;justify-content:center;margin-bottom:20px;}
    .logo{
      width:38px;height:38px;border-radius:10px;display:grid;place-items:center;
      background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;font-weight:900;
      box-shadow:inset 0 0 18px rgba(255,255,255,.2);
    }
    .brand-title{font-weight:700;font-size:22px;}
    .card{
      background:linear-gradient(180deg, var(--panel), var(--panel2));
      border:1px solid var(--border); border-radius:var(--radius);
      box-shadow:var(--shadow); padding:26px;
    }
    .card h1{margin:0 0 8px; font-size:22px; text-align:center;}
    .muted{color:var(--muted); font-size:14px;text-align:center;}

    .actions{
      display:grid; grid-template-columns:1fr; gap:14px; margin-top:20px;
    }
    .btn{
      background:var(--primary); color:#fff; border:1px solid transparent; border-radius:12px;
      padding:12px 14px; cursor:pointer; font-weight:700; text-align:center;
      transition:transform .05s ease, background .2s ease;
    }
    .btn:hover{ background:var(--primary2) }
    .btn:active{ transform: translateY(1px) }
    .btn.secondary{ background:transparent; color:var(--text); border-color:var(--border) }
    .btn.danger{ background:var(--danger) }

    .panel{
      display:none; margin-top:20px; padding:18px; border:1px solid var(--border); border-radius:12px;
      background:#101533;
      animation: fade .18s ease-out;
    }
    .panel.active{ display:block }
    @keyframes fade{ from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none} }

    .field{display:flex; flex-direction:column; gap:8px; margin:10px 0}
    .field label{font-size:13px; color:var(--muted)}
    .field input, .field textarea{
      background:#0c1024; border:1px solid var(--border); color:var(--text);
      padding:12px; border-radius:10px; outline:none;
    }
    .row{display:flex; gap:10px; flex-wrap:wrap}
    .row .btn{flex:0 0 auto}
    .toast{
      position:fixed; right:24px; bottom:24px; background:#0c1024; color:var(--text);
      padding:12px 14px; border-radius:10px; border:1px solid var(--border); opacity:0; transform:translateY(10px);
      transition: all .25s ease; box-shadow: var(--shadow);
    }
    .toast.show{ opacity:1; transform:translateY(0) }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="brand">
      <div class="logo">J</div>
      <div class="brand-title">Database Entry and Modification</div>
    </div>

    <div class="card">
      <h1>Choose an Action</h1>

      <div class="actions">
        <button class="btn" data-open="panel-new">New Entry</button>
        <button class="btn" data-open="panel-edit">Edit Entry</button>
        <button class="btn danger" data-open="panel-delete">Delete Entry</button>
      </div>

      <!-- New Entry -->
      <div id="panel-new" class="panel">
        <h2>New Entry</h2>
        <div class="field">
          <label for="title">Title</label>
          <input id="title" maxlength="200" placeholder="e.g., Day 1 â€” Getting started" />
        </div>
        <div class="field">
          <label for="content">Content</label>
          <textarea id="content" rows="6" placeholder="Write your thoughts..."></textarea>
        </div>
        <div class="row">
          <button class="btn" id="createBtn">Create</button>
          <button class="btn secondary" data-close>Close</button>
        </div>
      </div>

      <!-- Edit Entry -->
      <div id="panel-edit" class="panel">
        <h2>Edit Entry</h2>
        <div class="field">
          <label for="editId">Entry ID</label>
          <input id="editId" type="number" min="1" placeholder="e.g., 3" />
        </div>
        <div class="field">
          <label for="editTitle">New Title (optional)</label>
          <input id="editTitle" maxlength="200" placeholder="Leave empty to keep current" />
        </div>
        <div class="field">
          <label for="editContent">New Content (optional)</label>
          <input id="editContent" placeholder="Leave empty to keep current" />
        </div>
        <div class="row">
          <button class="btn" id="updateBtn">Update</button>
          <button class="btn secondary" data-close>Close</button>
        </div>
      </div>

      <!-- Delete Entry -->
      <div id="panel-delete" class="panel">
        <h2>Delete Entry</h2>
        <div class="field">
          <label for="deleteId">Entry ID</label>
          <input id="deleteId" type="number" min="1" placeholder="e.g., 5" />
        </div>
        <div class="row">
          <button class="btn danger" id="deleteBtn">Delete</button>
          <button class="btn secondary" data-close>Close</button>
        </div>
      </div>

      <div style="margin-top:22px; text-align:center; color:var(--muted); font-size:14px;">
        View complete data on <strong>Database</strong>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">Saved</div>

  <script>
    const API_BASE = 'http://127.0.0.1:8000'; // Change this to your deployed API later
    const $ = s => document.querySelector(s);
    const $$ = s => [...document.querySelectorAll(s)];
    const toast = $("#toast");

    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=> toast.classList.remove('show'), 1600);
    }

    function openPanel(id){
      $$(".panel").forEach(p => p.classList.remove('active'));
      const el = document.getElementById(id);
      if(el) el.classList.add('active');
    }
    function closePanels(){
      $$(".panel").forEach(p => p.classList.remove('active'));
    }

    $$(".actions .btn").forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.dataset.open;
        if(!id) return;
        openPanel(id);
      });
    });
    $$("[data-close]").forEach(b => b.addEventListener('click', closePanels));

    const titleEl = $("#title");
    const contentEl = $("#content");
    $("#createBtn").addEventListener('click', async ()=>{
      const title = titleEl.value.trim();
      const content = contentEl.value.trim();
      if(!title || !content){ showToast('Fill title and content'); return; }
      try{
        const res = await fetch(API_BASE + '/entries', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({title, content})
        });
        if(!res.ok) throw new Error();
        titleEl.value=''; contentEl.value='';
        showToast('Entry Created'); closePanels();
      }catch{ showToast('Create failed'); }
    });

    const editIdEl = $("#editId");
    const editTitleEl = $("#editTitle");
    const editContentEl = $("#editContent");
    $("#updateBtn").addEventListener('click', async ()=>{
      const id = Number(editIdEl.value);
      const title = editTitleEl.value.trim();
      const content = editContentEl.value.trim();
      if(!id){ showToast('Enter Entry ID'); return; }
      if(!title && !content){ showToast('Nothing to update'); return; }
      try{
        const res = await fetch(API_BASE + '/entries/' + id, {
          method:'PATCH',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ ...(title && {title}), ...(content && {content}) })
        });
        if(!res.ok) throw new Error();
        editTitleEl.value=''; editContentEl.value='';
        showToast('Entry Updated'); closePanels();
      }catch{ showToast('Update failed'); }
    });

    const deleteIdEl = $("#deleteId");
    $("#deleteBtn").addEventListener('click', async ()=>{
      const id = Number(deleteIdEl.value);
      if(!id){ showToast('Enter Entry ID'); return; }
      if(!confirm('Delete entry #' + id + '?')) return;
      try{
        const res = await fetch(API_BASE + '/entries/' + id, { method:'DELETE' });
        if(!res.ok) throw new Error();
        deleteIdEl.value='';
        showToast('Entry Deleted'); closePanels();
      }catch{ showToast('Delete failed'); }
    });
  </script>
</body>
</html>
